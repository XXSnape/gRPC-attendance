syntax = "proto3";

package lessonService;

import "lesson.proto";

service LessonService {
  rpc GetLessons (LessonsRequest) returns (LessonsResponse) {}
  rpc GetLessonsForMonth (LessonsForMonthRequest) returns (LessonsForMonthResponse) {}
  rpc GetLessonDetails (LessonDetailsRequest) returns (LessonDetailsResponse) {}
  rpc SetStudentAttendance (stream StudentAttendanceRequest) returns (stream StudentAttendanceResponse) {}
}


message StudentAttendanceRequest {
  string student_id = 1;
  lesson.Attendance attendance = 3;
}

message StudentAttendanceResponse {
  string student_id = 1;
  lesson.Attendance attendance = 2;
}


message LessonsRequest {
  string date = 1;
}

message LessonsResponse {
  repeated lesson.Schedule lessons = 1;
}

message LessonDetailsRequest {
  string lesson_id = 1;
}

message LessonsForMonthRequest {
  int32 month = 1;
  int32 year = 2;
}

message LessonsForMonthResponse {
  repeated string dates = 1;
}

message LessonDetailsResponse {
  lesson.Schedule schedule_data = 1;
  lesson.Group group = 2;
  repeated lesson.StudentAttendance attendances = 3;
  bool is_prefect = 4;
}